<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Sotax MQD: Cheaper in the long run</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="A calculator to find out how much money MQD could save you" />
    <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet" />
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <img class="logo" src="http://www.sotax.com/typo3conf/ext/ww_template/images/logo_sotaxgroup.png" width="146" height="31" alt="Sotax logo"/>
        <div>
            <h1 class="text-center">MQD Cost Comparison</h1>
            <p>
                SOTAX MQD, is a new universal tool for qualification of all brands of USP 1 and 2 dissolution testers.
            </p>
            <p>
                To help illustrate how much more value can provide than the alternatives we have developed this calculator.
                Simply specify the values that best represent your lab's costs to see how much SOTAX MQD could save you.
            </p>

            <h2>Your Details</h2>
            <table id="simple-settings" class="table table-striped">
                <tbody>
                    <tr>
                        <td>Number of Dissolution Baths to Qualify</td>
                        <td><a id="bathsToQual" class="editable">5</a></td>
                    </tr>
                    <tr>
                        <td>Number of Times per Year Qualifiction Required</td>
                        <td><a id="qualsPerYear" class="editable">2</a></td>
                    </tr>
                </tbody>
            </table>

            <div class="text-center">
                <button id="computeButton" class="btn btn-primary btn-lg" onclick="$('#results').toggle();$('#computeButton').toggle();">
                  Compute Savings
                </button>
            </div>
            
            <div id="results">
                <p id="headline-savings">
                    You could be saving between <span id="low-savings"></span> and <span id="high-savings"></span> annually by switching to Sotax MQD.
                </p>
                <hr />
                <h2>Savings</h2>
                <table id="savingsTable" class="table table-striped">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Enhanced Mechanical Qualification (manual toolkits)</th>
                            <th>Qualification with MQD</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="pvtOr">
                            <td>Annual Savings vs PVT (if USP I or II)</td>
                            <td class="mt"></td>
                            <td class="mqd"></td>
                        </tr>
                        <tr class="pvtAnd">
                            <td>Annual Savings vs PVT (if USP I and II)</td>
                            <td class="mt"></td>
                            <td class="mqd"></td>
                        </tr>
                        <tr class="mt">
                            <td>Annual Savings vs MQ (manual tools)</td>
                            <td>--</td>
                            <td class="mqd"></td>
                        </tr>
                    </tbody>
                </table>

                <h2>Costs Per Year</h2>
                <div id="cost-chart"></div>
                <hr />
                <p>
                    If you are interested in customizing assumptions that were used to come up with these calculations
                    please click on advanced settings below.
                </p>
                <div class="text-center">
                    <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myModal">
                      Advanced Settings
                    </button>
                </div>
            </div>
        </div>

        <div class="modal fade" id="myModal">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h2 class="modal-title">Computation Details</h2>
              </div>
              <div class="modal-body">
                <h3>Global Variables</h3>
                <table id="globalVaraibles" class="table table-striped">
                    <thead>
                        <tr>
                            <th>Assumption</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr title="Consider not only salary but associated costs (benefits, etc.)">
                            <td>Hourly Wage</td>
                            <td>
                                <a class="editable" id="hourlyCost">80</a>
                            </td>
                        </tr>
                        <tr>
                            <td>Wage multiplier</td>
                            <td>
                                <a class="editable" id="hourlyMultiplier">1.35</a>
                            </td>
                        </tr>
                        <tr title="Assumes 10 tests per 250 mg">
                            <td>Cost of Prednisone Reference Standard (250 mg)</td>
                            <td>
                                <a class="editable" id="costOfStandard">215</a>
                            </td>
                        </tr>
                        <tr title="Assumes 5 tests per 30 tablets">
                            <td>Cost of Prednisone Tablets (Qty = 30)</td>
                            <td><a class="editable" id="costOfTablets">249</a></td>
                        </tr>
                        <tr title="Assumes 50% increase in time and 6 additional Prednisone tablets when Stage 2 is tested">
                            <td>Percentage of PVT Tests Requiring Stage 2</td>
                            <td><a class="editable" id="percentageNeedingStageTwo">50</a></td>
                        </tr>
                    </tbody>
                </table>

                <h3>Process Variables</h3>
                <table id="processVaraibles" class="table table-striped">
                    <thead>
                        <tr>
                            <th></th>
                            <th title="Assumes bath is dedicated to either Paddles or Baskets">
                                PVT (USP I OR II)
                            </th>
                            <th title="Assumes bath will be qualified for both paddles and baskets">
                                PVT (USP I AND II)
                            </th>
                            <th title="Consider whether bath is qualified for paddles and/or baskets and the qualification time implication">
                                Enhanced Mechanical Qualification (manual toolkits)
                            </th>
                            <th>
                                Qualification with MQD
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="qualTime" title="Consider preparation and testing time">
                            <td>Time to Complete Qualification (Hours)</td>
                            <td><a class="editable pvtOr">4</a></td>
                            <td><a class="editable pvtAnd">8</a></td>
                            <td><a class="editable mt">2</a></td>
                            <td><a class="editable mqd">.5</a></td>
                        </tr>
                        <tr class="docTime" title="Consider transcription, data calculation, review, etc.">
                            <td>Documentation Time (Hours)</td>
                            <td><a class="editable pvtOr">2</a></td>
                            <td><a class="editable pvtAnd">2</a></td>
                            <td><a class="editable mt">2</a></td>
                            <td title="No data transcription required.  Data calculated and evaluated automatically.  Reports need to be printed or saved as pdf"><a class="editable mqd">.1</a></td>
                        </tr>
                        <tr class="qualToInvPercent" title="Consider investigations due to documentation/calculation issues, transcription errors, analyst error.">
                            <td>Percentage of Qualifications Leading to Investigation</td>
                            <td><a class="editable pvtOr">10</a></td>
                            <td><a class="editable pvtAnd">10</a></td>
                            <td><a class="editable mt">10</a></td>
                            <td><a class="editable mqd">1</a></td>
                        </tr>
                    </tbody>
                </table>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <script>
            $.fn.editable.defaults.mode = 'popup';
            google.load("visualization", "1", { packages: ["corechart"] });
            google.setOnLoadCallback(onChartLoad);
            $(document).ready(function () {
                $('.editable, .editable-simple').editable('option', 'validate', function (v) {
                    if (!v) return 'A value is required';
                    if (isNaN(v)) return 'Must be a number';
                    if (v <= 0) return 'Must be positive';
                });
                $('.editable').on('hidden', function (e, params) {
                    recalc();
                });
                docReady = true;
                recalc();
            });

            var chartLoaded = false;
            var docReady = false;

            function onChartLoad() {
                chartLoaded = true;
                if (docReady) {
                    recalc();
                }
            }

            function recalc() {
                var methods = ["pvtOr", "pvtAnd", "mt", "mqd"];
                var bathsNeeded = [1, 2, 0, 0];
                var stageTwoMultiple = [1, 1, 0, 0];
                var loadedCost = $("#hourlyCost").text() * $("#hourlyMultiplier").text();
                var costOfStandard = $("#costOfStandard").text() / 10;
                var costofTablets = $("#costOfTablets").text() / 5;
                var costs = $.map(methods, function (method, index) {
                    var qualificationTime = Number($("#processVaraibles .qualTime ." + method).text());
                    var documentationTime = Number($("#processVaraibles .docTime ." + method).text());
                    var laborCosts = (qualificationTime + documentationTime) * loadedCost;
                    var bathCosts = (costOfStandard + costofTablets) * bathsNeeded[index];
                    var stage2Costs = (costofTablets * bathsNeeded[index] + qualificationTime * loadedCost) * (Number($("#percentageNeedingStageTwo").text()) / 100) * stageTwoMultiple[index];
                    var costOfInvestigation = laborCosts * 4 * Number($("#processVaraibles .qualToInvPercent ." + method).text()) / 100;
                    return laborCosts + bathCosts + stage2Costs + costOfInvestigation;
                });
                var yearlyMultiple = Number($("#bathsToQual").text()) * Number($("#qualsPerYear").text());
                var costsPerMethod = {};
                var minSavings = Number.MAX_VALUE;
                var maxSavings = 0;
                $.map(methods, function (method, index) {
                    costsPerMethod[method] = +(costs[index] * yearlyMultiple).toFixed(2);
                    $.map(methods, function (method2, index2) {
                        if (index2 > index && index2 > 1) {
                            var savings = (costs[index] - costs[index2]) * yearlyMultiple;
                            minSavings = Math.min(savings, minSavings);
                            maxSavings = Math.max(savings, maxSavings);
                            $("#savingsTable ." + method + " ." + method2).text(formatCurrency((savings)));
                        }
                    });
                });
                $("#low-savings").text(formatCurrency(minSavings));
                $("#high-savings").text(formatCurrency(maxSavings));
                if (chartLoaded) {
                    var data = google.visualization.arrayToDataTable([
                      ['Method', 'Cost', ],
                      ['PVT (USP I and II)', costsPerMethod.pvtAnd],
                      ['PVT (USP I or II)', costsPerMethod.pvtOr],
                      ['MQ (manual toolkit)', costsPerMethod.mt],
                      ['MQD', costsPerMethod.mqd]
                    ]);

                    var options = {
                        vAxis: { format: '$#,###' },
                        legend: { position: "none" },
                        width: Math.max(320, Math.min(500, $(document).width()))
                    };

                    var formatter = new google.visualization.NumberFormat(
                        { prefix: '$' });
                    formatter.format(data, 1); // Apply formatter to second column

                    var chart = new google.visualization.ColumnChart(document.getElementById('cost-chart'));
                    chart.draw(data, options);
                }
            }

            function formatCurrency(x) {
                x = x.toFixed(2).toString();
                var pattern = /(-?\d+)(\d{3})/;
                while (pattern.test(x))
                    x = x.replace(pattern, "$1,$2");
                return "$" + x;
            }

            /*(function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-51683212-1', 'mqdroi.com');
            ga('send', 'pageview');*/


        </script>
</body>
</html>
